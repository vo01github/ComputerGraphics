


按顺序看


## 知识点

# Rasterization - 光栅化    
 ---
光栅化主要干的事就是确定哪些像素块属于三角形内部，光栅化的本质是确定绘制哪些离散的像素点（更确切的说是像素块）。

但是首先，我们需要通过绘制**扫描线**来绘制**三角形**。

## 2D直线光栅化

**斜率**  【让我们先回顾下数学上的斜率概念】  
斜率 = y方向上的改变/x方向上的改变

斜率为0，说明沿着x方向上走，Y值没有变化，说明直线是水平的。  
斜率为1，x坐标如果增加1.0个单位，y坐标就相应增加1.0个单位。45度角。  
斜率为无穷大，则直线为垂直直线。  

**Bresenham直线算法（布雷森漢姆直線演算法）**  
用来描绘由两点所决定的直线的算法。

其实只需要考虑斜率在 0 ~ 1 之间的直线，也就是与 x 轴夹角在 0 度到 45 度的直线。只要解决了这类直线的画法，其它角度的直线的绘制全部可以通过简单的坐标变换来实现。也就是只需要解决1/8的直线画法，剩下的直线通过坐标转换，镜像就可以得到了。

参考文章：
>http://liar.pangwa.com/2009/04/12/bresenham/
>http://www.cnblogs.com/soroman/archive/2006/07/27/509602.html
>http://blog.csdn.net/ming1006/article/details/8006769
>http://oldj.net/article/bresenham-algorithm/

光栅化2D直线还有一些其他算法，速度有的更快，如：  
**Run-Slicing**  
**Symmetric Double Step**  
**Quadruple Step**  


**2D直线剪切算法** 

需要计算 两条直线的交点  
请看 **《矩阵式计算两条直线的交点.md》**


## 2D三角形光栅化

## 绘制空心2D三角形

就是根据 三个顶点，光栅化3条直线，就可以画出来一个空心三角形了。
完全就是 **光栅化2D直线** 的应用。


## 绘制实心三角形

**扫描线Scanline算法**



参考文章 -《从零实现3D图像引擎》1～15
>  
http://blog.csdn.net/cppyin/article/category/780767


**如何判断像素块位于多边形的内部呢？**
以像素块的中心点作为判断依据，只要像素块的中心点位于多边形内部，便认为该像素块也位于多边形内部。（这句话在讲啥？）




首先我们要对三角形进行分类：可以分为三种。  
1. 平顶三角形  
2. 平底三角形  
3. 常规三角形【常规三角形可以拆分成2个三角形，上面的是平底三角形，下面的是平顶三角形】  


Tiled-based的算法


那么当像素块的中心点恰好在多边形的边上怎么办？到底是填还是不填呢？请看下面的问题。

---
**如何避免相邻的多边形重复绘制邻边？**

**top-left rule**  
1. Top-Left填充规则 参考资料：
>  
http://blog.csdn.net/damenhanter/article/details/6388934  

就是绘制一个多边形时，只绘制左边和上边，下边和右边不绘制，这样就可以解决相邻的多边形重复绘制邻边的问题了， 但是新问题来了。

**如何确定一个多边形的左边和上边？**  
用边 到 多边形中心点的高的角度来判断，【以极坐标来说，多边形中心点为源点，高位线段，Y轴开始为0度，顺时针算起吧】  
那么0度就是上边，180度就是下边。0 < X < 180, X就是右边，180 < Y < 360，Y就是左边。  

**如何确定一个多边形的中心点？** - 【这是个几何问题】  
形心是三角形的几何中心，通常也称为重心，三角形的三条中线（顶点和对边的中点的连线）交点，此点即为重心


**如何避免相邻的多边形重复绘制顶点？**


**vertex attribute interpolation**  
2. 顶点属性的插值 https://en.wikipedia.org/wiki/  
  
Barycentric_coordinate_system  


---

**多边形扫描线填充算法**  

多边形扫描线填充算法简单剖析（Scan-Line Filling）
> 
http://yacare.iteye.com/blog/2009769



